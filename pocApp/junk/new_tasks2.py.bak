from celery import  Celery
from celery import shared_task

from libnmap.process import NmapProcess
import sys
import getopt
#import utils.nmap_get_xml
#from .nmap_get_xml import *


#app = Celery('new_tasks',backend='rpc://', broker='pyamqp://')
#app = Celery('new_tasks', backend='amqp://', broker='pyamqp://')
#app = Celery('new_tasks', broker='amqp://')
#app = Celery('new_tasks', backend='amqp', broker='amqp://guest@localhost//')
#app = Celery('new_tasks', backend='rpc://', broker='pyamqp://')
app = Celery('tasks', broker='pyamqp://', backend='rpc://')
from celery import task

#@shared_task
#@app.task
@shared_task
def getNmapData(remoteSite):
    #nm = NmapProcess(remoteSite, options='--script ssl-cert')
    #nm.run()
    return  "hello World" # nm.stdout

#@app.task
#def getNmapData2(data):
#    return 1
    #inst = GetXML(data)
    #res = inst.fetchNmapData()
    #return (resultList)

#@app.task
#def getCertData(data):
#    inst = ParseXML(data)
#    resultList = inst.parseData()
#    return (resultList)
